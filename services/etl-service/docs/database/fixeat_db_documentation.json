{
    "database_metadata": {
        "business_domain": "Servicios técnicos de mantenimiento y reparación de equipos industriales",
        "industry_context": "Reparación y mantenimiento especializado de equipos de cocina industrial, panadería y hostelería",
        "data_classification": "Operacional y transaccional - Datos críticos de servicios técnicos",
        "update_frequency": "Tiempo real - Actualizaciones continuas durante operaciones de campo",
        "business_processes": [
            "Gestión de órdenes de servicio técnico",
            "Programación y asignación de actividades",
            "Registro y documentación de resoluciones",
            "Gestión de equipos y partes de repuesto",
            "Cotizaciones y facturación",
            "Seguimiento de técnicos y performance",
            "Portal de autogestión para clientes",
            "Integración con sistemas SAP"
        ],
        "data_flow": "Cliente reporta problema → Orden de servicio creada → Actividad programada → Técnico asignado → Diagnóstico y reparación → Resolución documentada → Cotización (si aplica) → Facturación → Sincronización SAP",
        "multi_tenant": true,
        "tenant_field": "team_id",
        "key_integrations": [
            "SAP",
            "Marsol API",
            "AWS S3",
            "Mobile Apps via Watermelon"
        ],
        "mobile_sync": true,
        "sync_technology": "WatermelonDB"
    },
    "tables": {
        "teams": {
            "business_purpose": "Organizaciones o empresas proveedoras de servicios técnicos - Entidad raíz del multi-tenant",
            "critical_fields": {
                "name": "Nombre de la empresa de servicios - CRÍTICO para identificación y branding",
                "slug": "Identificador único URL-friendly - CRÍTICO para ruteo y configuración",
                "contact_email": "Email principal de la organización - CRÍTICO para comunicaciones automáticas",
                "contact_address": "Dirección física de la empresa - Importante para documentos oficiales",
                "contact_website": "Sitio web corporativo - Metadata para branding",
                "contact_phone_number": "Teléfono principal - CRÍTICO para comunicaciones urgentes"
            },
            "ai_usage": {
                "prediction_input": [],
                "training_data": [],
                "metadata_source": [
                    "name",
                    "contact_email",
                    "contact_phone_number"
                ],
                "kb_value": "MEDIO: Información corporativa y de contacto para contexto organizacional"
            },
            "relationships": {
                "teams.id": "users.team_id (1:N - Técnicos por equipo)",
                "teams.id": "companies.team_id (1:N - Clientes por equipo)",
                "teams.id": "services.team_id (1:N - Servicios por equipo)",
                "teams.id": "equipments.team_id (1:N - Catálogo de equipos)",
                "teams.id": "quotes.team_id (1:N - Cotizaciones por equipo)"
            },
            "configuration_driven": true,
            "tenant_isolation": true
        },
        "users": {
            "business_purpose": "Técnicos y personal de las empresas de servicios con roles específicos",
            "critical_fields": {
                "name": "Nombre completo del técnico - CRÍTICO para identificación en reportes",
                "email": "Email único del usuario - CRÍTICO para autenticación y notificaciones",
                "role": "Rol dentro del sistema - CRÍTICO para control de acceso y permisos",
                "team_id": "Organización a la que pertenece - CRÍTICO para multi-tenant",
                "email_report_to": "Email para reportes automáticos - CRÍTICO para gestión"
            },
            "ai_usage": {
                "prediction_input": [
                    "team_id",
                    "role"
                ],
                "training_data": [],
                "metadata_source": [
                    "name",
                    "email",
                    "role"
                ],
                "kb_value": "ALTO: Información de técnicos para asignación automática y análisis de performance"
            },
            "relationships": {
                "users.team_id": "teams.id (N:1 - Usuario pertenece a equipo)",
                "users.id": "activities.performed_by (1:N - Actividades realizadas)",
                "users.id": "activity_assignations.assigned_to (1:N - Asignaciones)",
                "users.id": "receptions.delivered_by (1:N - Entregas realizadas)",
                "users.id": "services.supervised_by (1:N - Servicios supervisados)"
            },
            "authentication": true,
            "mobile_sync": true
        },
        "companies": {
            "business_purpose": "Empresas clientes que requieren servicios técnicos con información fiscal y comercial",
            "critical_fields": {
                "name": "Razón social del cliente - CRÍTICO para facturación y documentos oficiales",
                "rut": "RUT/NIT fiscal único - CRÍTICO para facturación y documentos legales",
                "additional_name": "Nombre comercial alternativo - Importante para identificación",
                "company_segment_id": "Segmento de negocio - CRÍTICO para clasificación y análisis",
                "team_id": "Equipo que atiende al cliente - CRÍTICO para multi-tenant"
            },
            "ai_usage": {
                "prediction_input": [
                    "company_segment_id",
                    "team_id"
                ],
                "training_data": [
                    "name",
                    "company_segment_id"
                ],
                "metadata_source": [
                    "name",
                    "rut",
                    "additional_name"
                ],
                "kb_value": "ALTO: Información de clientes para análisis de segmentación y patrones de servicio"
            },
            "relationships": {
                "companies.team_id": "teams.id (N:1 - Cliente pertenece a equipo)",
                "companies.company_segment_id": "company_segments.id (N:1 - Segmento del cliente)",
                "companies.id": "company_branches.company_id (1:N - Sucursales)",
                "companies.id": "client_companies.company_id (1:N - Relación con portales)"
            },
            "business_critical": true,
            "fiscal_data": true
        },
        "company_branches": {
            "business_purpose": "Sucursales o ubicaciones físicas específicas de las empresas cliente",
            "critical_fields": {
                "branch_name": "Nombre de la sucursal - CRÍTICO para identificación geográfica",
                "company_id": "Empresa propietaria - CRÍTICO para relación jerárquica",
                "is_urban_area": "Indicador zona urbana/rural - CRÍTICO para logística y costos"
            },
            "ai_usage": {
                "prediction_input": [
                    "is_urban_area",
                    "company_id"
                ],
                "training_data": [
                    "branch_name",
                    "is_urban_area"
                ],
                "metadata_source": [
                    "branch_name"
                ],
                "kb_value": "ALTO: Ubicaciones específicas para optimización de rutas y asignación de técnicos"
            },
            "relationships": {
                "company_branches.company_id": "companies.id (N:1 - Sucursal pertenece a empresa)",
                "company_branches.id": "company_branch_equipment.company_branch_id (1:N - Equipos)",
                "company_branches.id": "services.company_branch_id (1:N - Servicios en sucursal)"
            },
            "geographical": true
        },
        "equipments": {
            "business_purpose": "Catálogo maestro de equipos industriales con especificaciones técnicas completas",
            "critical_fields": {
                "name": "Nombre del equipo - CRÍTICO para identificación técnica",
                "sku": "Código único del producto - CRÍTICO para gestión de inventario y partes",
                "documentation": "Documentación técnica - CRÍTICO para Knowledge Base de reparación",
                "maintenance_time": "Tiempo estándar de mantenimiento - CRÍTICO para planificación",
                "remarks": "Observaciones técnicas - CRÍTICO para consideraciones especiales",
                "equipment_brand_id": "Marca del equipo - CRÍTICO para procedimientos específicos",
                "team_id": "Equipo que maneja este tipo de equipo - CRÍTICO para especialización"
            },
            "ai_usage": {
                "prediction_input": [
                    "equipment_brand_id",
                    "maintenance_time",
                    "sku"
                ],
                "training_data": [
                    "name",
                    "documentation",
                    "remarks"
                ],
                "metadata_source": [
                    "name",
                    "sku",
                    "equipment_brand_id"
                ],
                "kb_value": "CRÍTICO: Especificaciones técnicas y procedimientos para IA de diagnóstico y reparación"
            },
            "relationships": {
                "equipments.team_id": "teams.id (N:1 - Equipo gestionado por team)",
                "equipments.equipment_brand_id": "equipment_brands.id (N:1 - Marca)",
                "equipments.id": "equipment_parts.equipment_id (1:N - Partes del equipo)",
                "equipments.id": "company_branch_equipment.equipment_id (1:N - Instalaciones)"
            },
            "technical_specifications": true,
            "knowledge_base": true
        },
        "equipment_parts": {
            "business_purpose": "Partes y repuestos específicos para cada tipo de equipo con información técnica",
            "critical_fields": {
                "name": "Nombre de la parte - CRÍTICO para identificación técnica",
                "part_number": "Número de parte único - CRÍTICO para pedidos y gestión de stock",
                "equipment_id": "Equipo al que pertenece - CRÍTICO para compatibilidad",
                "unit_price": "Precio unitario - CRÍTICO para cotizaciones automáticas",
                "team_id": "Equipo que maneja la parte - CRÍTICO para disponibilidad"
            },
            "ai_usage": {
                "prediction_input": [
                    "equipment_id",
                    "part_number",
                    "unit_price"
                ],
                "training_data": [
                    "name",
                    "part_number"
                ],
                "metadata_source": [
                    "name",
                    "part_number",
                    "equipment_id"
                ],
                "kb_value": "CRÍTICO: Información de repuestos para recomendación automática y cotizaciones"
            },
            "relationships": {
                "equipment_parts.equipment_id": "equipments.id (N:1 - Parte pertenece a equipo)",
                "equipment_parts.team_id": "teams.id (N:1 - Parte gestionada por team)",
                "equipment_parts.id": "quote_lines.equipment_part_id (1:N - Líneas de cotización)"
            },
            "inventory_management": true,
            "pricing": true
        },
        "company_branch_equipment": {
            "business_purpose": "Equipos específicos instalados en ubicaciones del cliente con datos únicos",
            "critical_fields": {
                "serial_number": "Número de serie único - CRÍTICO para identificación y garantía",
                "equipment_id": "Tipo de equipo - CRÍTICO para procedimientos técnicos",
                "company_branch_id": "Ubicación del equipo - CRÍTICO para servicio en sitio",
                "qr_code": "Código QR para identificación móvil - CRÍTICO para operaciones de campo"
            },
            "ai_usage": {
                "prediction_input": [
                    "equipment_id",
                    "company_branch_id",
                    "serial_number"
                ],
                "training_data": [],
                "metadata_source": [
                    "serial_number",
                    "qr_code"
                ],
                "kb_value": "ALTO: Equipos específicos para historial de servicios y mantenimiento predictivo"
            },
            "relationships": {
                "company_branch_equipment.equipment_id": "equipments.id (N:1 - Tipo de equipo)",
                "company_branch_equipment.company_branch_id": "company_branches.id (N:1 - Ubicación)",
                "company_branch_equipment.id": "activities.company_branch_equipment_id (1:N - Servicios)"
            },
            "unique_constraints": [
                "serial_number",
                "company_branch_id"
            ],
            "qr_enabled": true
        },
        "services": {
            "business_purpose": "Órdenes de servicio técnico principal con información completa del trabajo solicitado",
            "critical_fields": {
                "name": "Descripción del servicio - CRÍTICO para identificación del problema",
                "code": "Código único del servicio - CRÍTICO para seguimiento y referencias",
                "execution_date": "Fecha programada - CRÍTICO para planificación y logística",
                "resolution": "Resolución final del servicio - CRÍTICO para Knowledge Base",
                "service_priority_id": "Prioridad del servicio - CRÍTICO para scheduling automático",
                "service_status_id": "Estado actual - CRÍTICO para workflow y seguimiento",
                "service_type_id": "Tipo de servicio - CRÍTICO para clasificación y análisis",
                "additional_service_status_id": "Estado adicional - CRÍTICO para workflow específico",
                "company_branch_id": "Ubicación del servicio - CRÍTICO para asignación geográfica",
                "team_id": "Equipo responsable - CRÍTICO para multi-tenant",
                "factured_value": "Valor facturado - CRÍTICO para análisis financiero",
                "contract_code": "Código de contrato - CRÍTICO para facturación",
                "client_comment": "Comentario del cliente - CRÍTICO para contexto del problema",
                "supervised_by": "Supervisor asignado - CRÍTICO para escalamiento"
            },
            "ai_usage": {
                "prediction_input": [
                    "service_type_id",
                    "service_priority_id",
                    "company_branch_id",
                    "client_comment"
                ],
                "training_data": [
                    "name",
                    "resolution",
                    "client_comment"
                ],
                "metadata_source": [
                    "code",
                    "execution_date",
                    "service_status_id"
                ],
                "kb_value": "CRÍTICO: Casos completos de servicio para entrenamiento de IA predictiva y Knowledge Base"
            },
            "relationships": {
                "services.team_id": "teams.id (N:1 - Servicio gestionado por team)",
                "services.company_branch_id": "company_branches.id (N:1 - Ubicación del servicio)",
                "services.service_priority_id": "service_priorities.id (N:1 - Prioridad)",
                "services.service_status_id": "service_statuses.id (N:1 - Estado)",
                "services.service_type_id": "service_types.id (N:1 - Tipo)",
                "services.additional_service_status_id": "additional_service_statuses.id (N:1 - Estado adicional)",
                "services.supervised_by": "users.id (N:1 - Supervisor)",
                "services.id": "activities.service_id (1:N - Actividades del servicio)",
                "services.id": "quotes.quotable_id (1:N - Cotizaciones polimórficas)",
                "services.id": "sap_synched_services.service_id (1:1 - Sincronización SAP)"
            },
            "workflow_driven": true,
            "sap_integration": true,
            "business_critical": true
        },
        "activities": {
            "business_purpose": "Actividades específicas de trabajo técnico dentro de un servicio con seguimiento temporal completo",
            "critical_fields": {
                "service_number": "Número de referencia - CRÍTICO para trazabilidad",
                "service_id": "Servicio padre - CRÍTICO para agrupación",
                "performed_by": "Técnico asignado - CRÍTICO para responsabilidad",
                "planned_start": "Inicio planificado - CRÍTICO para scheduling",
                "planned_end": "Fin planificado - CRÍTICO para duración estimada",
                "started_at": "Inicio real - CRÍTICO para tracking temporal",
                "arrived_at": "Llegada al sitio - CRÍTICO para logística",
                "work_started_at": "Inicio del trabajo - CRÍTICO para tiempo efectivo",
                "finished_at": "Finalización - CRÍTICO para duración real",
                "activity_status_id": "Estado de la actividad - CRÍTICO para workflow",
                "company_branch_equipment_id": "Equipo específico - CRÍTICO para historial",
                "code": "Código único - CRÍTICO para identificación",
                "rectified_at": "Fecha de rectificación - CRÍTICO para auditoría",
                "team_id": "Equipo responsable - CRÍTICO para multi-tenant",
                "time_effort": "Esfuerzo en tiempo - CRÍTICO para análisis de performance",
                "started_at_location": "Ubicación GPS inicio - CRÍTICO para verificación",
                "arrived_at_location": "Ubicación GPS llegada - CRÍTICO para verificación",
                "work_started_at_location": "Ubicación GPS trabajo - CRÍTICO para verificación",
                "finished_at_location": "Ubicación GPS fin - CRÍTICO para verificación"
            },
            "ai_usage": {
                "prediction_input": [
                    "service_id",
                    "performed_by",
                    "company_branch_equipment_id",
                    "planned_start",
                    "time_effort"
                ],
                "training_data": [
                    "service_number",
                    "started_at",
                    "finished_at",
                    "work_started_at"
                ],
                "metadata_source": [
                    "code",
                    "activity_status_id",
                    "rectified_at"
                ],
                "kb_value": "CRÍTICO: Datos temporales y de ejecución para análisis predictivo de tiempos y optimización de rutas"
            },
            "relationships": {
                "activities.service_id": "services.id (N:1 - Actividad pertenece a servicio)",
                "activities.performed_by": "users.id (N:1 - Técnico responsable)",
                "activities.activity_status_id": "activity_statuses.id (N:1 - Estado)",
                "activities.company_branch_equipment_id": "company_branch_equipment.id (N:1 - Equipo específico)",
                "activities.team_id": "teams.id (N:1 - Equipo responsable)",
                "activities.previous_activity_id": "activities.id (Self-reference - Actividad anterior)",
                "activities.id": "activity_subtasks.activity_id (1:N - Subtareas)",
                "activities.id": "activity_assignations.activity_id (1:N - Asignaciones múltiples)",
                "activities.id": "resolutions.resolutable_id (1:1 - Resolución polimórfica)",
                "activities.id": "receptions.activity_id (1:N - Recepciones)",
                "activities.id": "quotes.quotable_id (1:N - Cotizaciones polimórficas)"
            },
            "temporal_tracking": true,
            "gps_tracking": true,
            "workflow_driven": true,
            "sap_integration": true,
            "mobile_primary": true
        },
        "resolutions": {
            "business_purpose": "Documentación detallada de la resolución de servicios con información técnica y firma digital",
            "critical_fields": {
                "observations": "Descripción detallada del trabajo realizado - CRÍTICO para Knowledge Base técnico",
                "requires_quote": "Requiere cotización - CRÍTICO para workflow de facturación",
                "equipment_stopped": "Equipo detenido - CRÍTICO para análisis de impacto",
                "requires_workshop": "Requiere taller - CRÍTICO para planificación logística",
                "requires_dispatch_guide": "Requiere guía de despacho - CRÍTICO para procedimientos",
                "recipient_name": "Nombre quien recibe - CRÍTICO para validación legal",
                "recipient_rut": "RUT quien recibe - CRÍTICO para documentos fiscales",
                "recipient_email": "Email contacto - CRÍTICO para seguimiento",
                "recipient_phone": "Teléfono contacto - CRÍTICO para comunicación",
                "recipient_position": "Cargo en empresa - CRÍTICO para autorización",
                "recipient_signature": "Firma digital - CRÍTICO para validación legal",
                "resolutable_type": "Tipo de entidad - CRÍTICO para polimorfismo",
                "resolutable_id": "ID de la entidad - CRÍTICO para relación",
                "reception_proof": "Prueba de recepción - CRÍTICO para evidencia"
            },
            "ai_usage": {
                "prediction_input": [
                    "requires_quote",
                    "equipment_stopped",
                    "requires_workshop"
                ],
                "training_data": [
                    "observations"
                ],
                "metadata_source": [
                    "recipient_name",
                    "recipient_position"
                ],
                "kb_value": "CRÍTICO: Procedimientos técnicos detallados para entrenamiento de IA de diagnóstico y Knowledge Base"
            },
            "relationships": {
                "resolutions.resolutable_id + resolutable_type": "activities.id | services.id (Polimórfico - Resolución de actividad o servicio)"
            },
            "legal_document": true,
            "digital_signature": true,
            "polymorphic": true
        },
        "quotes": {
            "business_purpose": "Cotizaciones y presupuestos para servicios con información fiscal completa",
            "critical_fields": {
                "quote_number": "Número de cotización - CRÍTICO para referencia fiscal",
                "receiver": "Destinatario - CRÍTICO para facturación",
                "rut": "RUT del destinatario - CRÍTICO para documentos fiscales",
                "address": "Dirección de facturación - CRÍTICO para documentos",
                "city": "Ciudad - CRÍTICO para ubicación fiscal",
                "commune": "Comuna - CRÍTICO para ubicación específica",
                "phone_number": "Teléfono contacto - CRÍTICO para comunicación",
                "contact": "Persona de contacto - CRÍTICO para seguimiento",
                "email": "Email para envío - CRÍTICO para entrega automática",
                "ship_address": "Dirección de envío - CRÍTICO para logística",
                "ship_address_code": "Código de envío - CRÍTICO para identificación",
                "payment_type": "Tipo de pago - CRÍTICO para facturación",
                "quotable_type": "Tipo de entidad cotizada - CRÍTICO para polimorfismo",
                "quotable_id": "ID de entidad cotizada - CRÍTICO para relación",
                "quote_state_id": "Estado de la cotización - CRÍTICO para workflow",
                "prefilled_at": "Fecha de prellenado - CRÍTICO para auditoría",
                "prefilled_from": "Origen de datos - CRÍTICO para trazabilidad",
                "prefilled_data": "Datos prellenados - CRÍTICO para validación",
                "team_id": "Equipo emisor - CRÍTICO para multi-tenant"
            },
            "ai_usage": {
                "prediction_input": [
                    "quotable_type",
                    "payment_type",
                    "prefilled_from"
                ],
                "training_data": [
                    "receiver",
                    "address",
                    "prefilled_data"
                ],
                "metadata_source": [
                    "quote_number",
                    "quote_state_id"
                ],
                "kb_value": "ALTO: Patrones de cotización para automatización de presupuestos y análisis comercial"
            },
            "relationships": {
                "quotes.quotable_id + quotable_type": "activities.id | services.id (Polimórfico - Cotización para actividad o servicio)",
                "quotes.quote_state_id": "quote_states.id (N:1 - Estado)",
                "quotes.team_id": "teams.id (N:1 - Equipo emisor)",
                "quotes.id": "quote_lines.quote_id (1:N - Líneas de cotización)"
            },
            "fiscal_document": true,
            "polymorphic": true,
            "workflow_driven": true
        },
        "quote_lines": {
            "business_purpose": "Líneas detalladas de cotización con partes y servicios específicos",
            "critical_fields": {
                "quote_id": "Cotización padre - CRÍTICO para agrupación",
                "equipment_part_id": "Parte cotizada - CRÍTICO para identificación técnica",
                "quantity": "Cantidad - CRÍTICO para cálculo total",
                "unit_price": "Precio unitario - CRÍTICO para cálculo",
                "total": "Total de línea - CRÍTICO para sumatoria",
                "activity_subtask_id": "Subtarea relacionada - CRÍTICO para trazabilidad"
            },
            "ai_usage": {
                "prediction_input": [
                    "equipment_part_id",
                    "quantity",
                    "unit_price"
                ],
                "training_data": [
                    "quantity",
                    "unit_price",
                    "total"
                ],
                "metadata_source": [
                    "quote_id"
                ],
                "kb_value": "ALTO: Patrones de consumo de partes para predicción automática de cotizaciones"
            },
            "relationships": {
                "quote_lines.quote_id": "quotes.id (N:1 - Línea pertenece a cotización)",
                "quote_lines.equipment_part_id": "equipment_parts.id (N:1 - Parte cotizada)",
                "quote_lines.activity_subtask_id": "activity_subtasks.id (N:1 - Subtarea relacionada)"
            },
            "financial_calculation": true
        },
        "activity_subtasks": {
            "business_purpose": "Subtareas específicas dentro de una actividad para desglose detallado de trabajo",
            "critical_fields": {
                "activity_id": "Actividad padre - CRÍTICO para agrupación",
                "name": "Nombre de la subtarea - CRÍTICO para identificación",
                "description": "Descripción detallada - CRÍTICO para Knowledge Base técnico",
                "is_completed": "Estado de completitud - CRÍTICO para seguimiento",
                "completed_at": "Fecha de completitud - CRÍTICO para tiempo real"
            },
            "ai_usage": {
                "prediction_input": [
                    "activity_id",
                    "is_completed"
                ],
                "training_data": [
                    "name",
                    "description"
                ],
                "metadata_source": [
                    "completed_at"
                ],
                "kb_value": "ALTO: Procedimientos técnicos detallados para descomposición automática de tareas"
            },
            "relationships": {
                "activity_subtasks.activity_id": "activities.id (N:1 - Subtarea pertenece a actividad)",
                "activity_subtasks.id": "quote_lines.activity_subtask_id (1:N - Líneas de cotización)"
            },
            "task_breakdown": true
        },
        "activity_assignations": {
            "business_purpose": "Asignaciones múltiples de técnicos a actividades para trabajo en equipo",
            "critical_fields": {
                "activity_id": "Actividad asignada - CRÍTICO para agrupación",
                "assigned_to": "Técnico asignado - CRÍTICO para responsabilidad",
                "assigned_at": "Fecha de asignación - CRÍTICO para auditoría",
                "role": "Rol en la actividad - CRÍTICO para responsabilidades específicas"
            },
            "ai_usage": {
                "prediction_input": [
                    "activity_id",
                    "assigned_to",
                    "role"
                ],
                "training_data": [],
                "metadata_source": [
                    "assigned_at"
                ],
                "kb_value": "MEDIO: Patrones de asignación para optimización automática de equipos"
            },
            "relationships": {
                "activity_assignations.activity_id": "activities.id (N:1 - Asignación a actividad)",
                "activity_assignations.assigned_to": "users.id (N:1 - Técnico asignado)"
            },
            "team_coordination": true
        },
        "comments": {
            "business_purpose": "Sistema de comentarios polimórfico para seguimiento y comunicación en cualquier entidad",
            "critical_fields": {
                "content": "Contenido del comentario - CRÍTICO para seguimiento de comunicaciones",
                "commentable_type": "Tipo de entidad - CRÍTICO para polimorfismo",
                "commentable_id": "ID de entidad - CRÍTICO para relación",
                "user_id": "Usuario que comenta - CRÍTICO para trazabilidad",
                "created_at": "Fecha del comentario - CRÍTICO para cronología"
            },
            "ai_usage": {
                "prediction_input": [
                    "commentable_type",
                    "user_id"
                ],
                "training_data": [
                    "content"
                ],
                "metadata_source": [
                    "created_at"
                ],
                "kb_value": "ALTO: Comunicaciones y seguimiento para análisis de patrones de problemas"
            },
            "relationships": {
                "comments.commentable_id + commentable_type": "Multiple (Polimórfico - Comentario en cualquier entidad)",
                "comments.user_id": "users.id (N:1 - Autor del comentario)"
            },
            "polymorphic": true,
            "audit_trail": true
        },
        "forms": {
            "business_purpose": "Formularios dinámicos configurables para captura de datos específicos",
            "critical_fields": {
                "name": "Nombre del formulario - CRÍTICO para identificación",
                "team_id": "Equipo propietario - CRÍTICO para multi-tenant",
                "is_active": "Estado activo - CRÍTICO para disponibilidad"
            },
            "ai_usage": {
                "prediction_input": [
                    "team_id",
                    "is_active"
                ],
                "training_data": [
                    "name"
                ],
                "metadata_source": [
                    "created_at"
                ],
                "kb_value": "MEDIO: Estructura de formularios para automatización de captura de datos"
            },
            "relationships": {
                "forms.team_id": "teams.id (N:1 - Formulario pertenece a equipo)",
                "forms.id": "form_sections.form_id (1:N - Secciones del formulario)",
                "forms.id": "required_forms.form_id (1:N - Requerimientos)"
            },
            "dynamic_forms": true
        },
        "form_responses": {
            "business_purpose": "Respuestas capturadas de formularios dinámicos con datos estructurados",
            "critical_fields": {
                "form_input_id": "Campo del formulario - CRÍTICO para estructura",
                "response": "Respuesta capturada - CRÍTICO para datos de negocio",
                "answerable_type": "Tipo de entidad - CRÍTICO para polimorfismo",
                "answerable_id": "ID de entidad - CRÍTICO para relación"
            },
            "ai_usage": {
                "prediction_input": [
                    "form_input_id",
                    "answerable_type"
                ],
                "training_data": [
                    "response"
                ],
                "metadata_source": [
                    "created_at"
                ],
                "kb_value": "ALTO: Datos estructurados capturados para análisis y entrenamiento de modelos"
            },
            "relationships": {
                "form_responses.form_input_id": "form_inputs.id (N:1 - Campo respondido)",
                "form_responses.answerable_id + answerable_type": "Multiple (Polimórfico - Respuesta asociada a entidad)"
            },
            "structured_data": true,
            "polymorphic": true
        },
        "qrs": {
            "business_purpose": "Códigos QR para identificación rápida de equipos y acceso móvil directo",
            "critical_fields": {
                "redirect_url": "URL de redirección - CRÍTICO para funcionalidad del QR",
                "team_id": "Equipo propietario - CRÍTICO para multi-tenant",
                "location": "Ubicación del QR - CRÍTICO para contexto físico"
            },
            "ai_usage": {
                "prediction_input": [
                    "team_id",
                    "location"
                ],
                "training_data": [],
                "metadata_source": [
                    "redirect_url"
                ],
                "kb_value": "BAJO: Códigos de acceso rápido para optimización de flujos móviles"
            },
            "relationships": {
                "qrs.team_id": "teams.id (N:1 - QR pertenece a equipo)"
            },
            "mobile_integration": true,
            "quick_access": true
        },
        "service_logs": {
            "business_purpose": "Auditoría completa de cambios en servicios para trazabilidad y análisis",
            "critical_fields": {
                "service_id": "Servicio auditado - CRÍTICO para trazabilidad",
                "user_id": "Usuario que realizó cambio - CRÍTICO para responsabilidad",
                "changes": "Campos modificados - CRÍTICO para detalle de auditoría",
                "type": "Tipo de operación - CRÍTICO para clasificación",
                "service_priority_id": "Prioridad en el momento - CRÍTICO para análisis temporal",
                "service_status_id": "Estado en el momento - CRÍTICO para flujo de trabajo",
                "service_type_id": "Tipo en el momento - CRÍTICO para categorización",
                "additional_service_status_id": "Estado adicional - CRÍTICO para workflow específico"
            },
            "ai_usage": {
                "prediction_input": [
                    "service_id",
                    "type",
                    "service_priority_id",
                    "service_status_id"
                ],
                "training_data": [
                    "changes"
                ],
                "metadata_source": [
                    "created_at",
                    "user_id"
                ],
                "kb_value": "ALTO: Patrones de cambios para análisis de workflow y optimización de procesos"
            },
            "relationships": {
                "service_logs.service_id": "services.id (N:1 - Log del servicio)",
                "service_logs.user_id": "users.id (N:1 - Usuario que modifica)",
                "service_logs.service_priority_id": "service_priorities.id (N:1 - Prioridad histórica)",
                "service_logs.service_status_id": "service_statuses.id (N:1 - Estado histórico)",
                "service_logs.service_type_id": "service_types.id (N:1 - Tipo histórico)",
                "service_logs.additional_service_status_id": "additional_service_statuses.id (N:1 - Estado adicional histórico)"
            },
            "audit_trail": true,
            "temporal_analysis": true
        },
        "sap_synched_services": {
            "business_purpose": "Servicios sincronizados con SAP para integración empresarial bidireccional",
            "critical_fields": {
                "service_id": "Servicio local - CRÍTICO para mapeo",
                "sap_service_id": "ID en SAP - CRÍTICO para sincronización",
                "last_sync_at": "Última sincronización - CRÍTICO para control temporal",
                "sync_status": "Estado de sincronización - CRÍTICO para monitoreo"
            },
            "ai_usage": {
                "prediction_input": [
                    "sync_status",
                    "last_sync_at"
                ],
                "training_data": [],
                "metadata_source": [
                    "sap_service_id"
                ],
                "kb_value": "BAJO: Metadata de integración para monitoreo de sincronización"
            },
            "relationships": {
                "sap_synched_services.service_id": "services.id (1:1 - Servicio sincronizado único)"
            },
            "external_integration": true,
            "sap_specific": true
        },
        "time_records": {
            "business_purpose": "Registros detallados de tiempo trabajado para análisis de productividad",
            "critical_fields": {
                "activity_id": "Actividad registrada - CRÍTICO para trazabilidad",
                "user_id": "Usuario que registra - CRÍTICO para productividad individual",
                "started_at": "Inicio del registro - CRÍTICO para cálculo temporal",
                "ended_at": "Fin del registro - CRÍTICO para duración",
                "type": "Tipo de registro - CRÍTICO para clasificación",
                "description": "Descripción del trabajo - CRÍTICO para detalle"
            },
            "ai_usage": {
                "prediction_input": [
                    "activity_id",
                    "user_id",
                    "type",
                    "started_at",
                    "ended_at"
                ],
                "training_data": [
                    "description"
                ],
                "metadata_source": [
                    "type"
                ],
                "kb_value": "CRÍTICO: Datos temporales para análisis predictivo de duración y optimización de asignaciones"
            },
            "relationships": {
                "time_records.activity_id": "activities.id (N:1 - Tiempo en actividad)",
                "time_records.user_id": "users.id (N:1 - Usuario que trabaja)"
            },
            "productivity_analysis": true,
            "time_tracking": true
        }
    },
    "lookup_tables": {
        "activity_statuses": {
            "business_purpose": "Estados workflow de actividades técnicas",
            "key_values": [
                "new",
                "programmed",
                "executed",
                "cancelled",
                "audited_fixed",
                "audited_accepted"
            ],
            "ai_relevance": "ALTO: Control de flujo para predicción de estados siguientes"
        },
        "service_statuses": {
            "business_purpose": "Estados workflow de servicios principales",
            "key_values": [
                "open",
                "closed",
                "cancelled",
                "in_progress"
            ],
            "ai_relevance": "ALTO: Estados principales para análisis de duración y workflow"
        },
        "service_priorities": {
            "business_purpose": "Prioridades de servicio para scheduling",
            "key_values": [
                "low",
                "medium",
                "high",
                "urgent",
                "critical"
            ],
            "ai_relevance": "CRÍTICO: Factor clave para algoritmos de asignación automática"
        },
        "service_types": {
            "business_purpose": "Tipos de servicio técnico especializado",
            "ai_relevance": "CRÍTICO: Clasificación principal para predicción de recursos y tiempo"
        },
        "additional_service_statuses": {
            "business_purpose": "Estados adicionales específicos por team",
            "ai_relevance": "ALTO: Estados personalizados para workflow específico"
        },
        "equipment_brands": {
            "business_purpose": "Marcas de equipos para procedimientos específicos",
            "ai_relevance": "ALTO: Factor importante para procedimientos técnicos especializados"
        },
        "company_segments": {
            "business_purpose": "Segmentación de clientes por industria",
            "ai_relevance": "ALTO: Segmentación para análisis de patrones por industria"
        },
        "quote_states": {
            "business_purpose": "Estados workflow de cotizaciones",
            "ai_relevance": "MEDIO: Control de flujo comercial"
        }
    },
    "geographical_tables": {
        "countries": {
            "business_purpose": "Países para localización geográfica",
            "ai_relevance": "BAJO: Metadata geográfica"
        },
        "states": {
            "business_purpose": "Estados/regiones dentro de países",
            "ai_relevance": "BAJO: Metadata geográfica"
        },
        "cities": {
            "business_purpose": "Ciudades para ubicación específica",
            "ai_relevance": "MEDIO: Factor para análisis logístico"
        },
        "addresses": {
            "business_purpose": "Direcciones específicas polimórficas",
            "ai_relevance": "MEDIO: Datos de ubicación para optimización de rutas"
        }
    },
    "client_portal_tables": {
        "clients": {
            "business_purpose": "Clientes del portal de autogestión",
            "ai_relevance": "MEDIO: Usuarios del portal para análisis de uso"
        },
        "client_users": {
            "business_purpose": "Usuarios del portal de clientes",
            "ai_relevance": "MEDIO: Acceso del portal para análisis de engagement"
        },
        "client_companies": {
            "business_purpose": "Relación clientes-empresas para acceso",
            "ai_relevance": "BAJO: Metadata de acceso"
        }
    },
    "configuration_tables": {
        "features": {
            "business_purpose": "Funcionalidades técnicas configurables",
            "ai_relevance": "BAJO: Configuración de sistema"
        },
        "data_resources": {
            "business_purpose": "Recursos de datos configurables",
            "ai_relevance": "BAJO: Configuración de datos"
        },
        "app_versions": {
            "business_purpose": "Versiones de aplicaciones móviles",
            "ai_relevance": "BAJO: Control de versiones"
        }
    },
    "examples": [
        {
            "table": "services",
            "scenario": "Servicio de reparación de horno industrial",
            "sample_data": {
                "name": "Reparación horno RATIONAL CombiMaster - No enciende",
                "client_comment": "El horno no enciende desde ayer, display completamente apagado. Necesitamos urgente porque tenemos evento mañana",
                "resolution": "Se identificó falla en tarjeta de control principal. Procedimiento: 1) Diagnóstico con multímetro - Sin voltaje en entrada. 2) Revisión fusibles - F1 quemado. 3) Reemplazo tarjeta RC-001. 4) Recalibración parámetros. 5) Pruebas funcionamiento. Equipo operativo al 100%",
                "service_priority": "urgent",
                "service_type": "corrective_maintenance"
            }
        },
        {
            "table": "activities",
            "scenario": "Actividad de diagnóstico con seguimiento temporal",
            "sample_data": {
                "service_number": "SRV-2024-001234",
                "planned_start": "2024-09-12 09:00:00",
                "started_at": "2024-09-12 09:15:00",
                "arrived_at": "2024-09-12 09:45:00",
                "work_started_at": "2024-09-12 10:00:00",
                "finished_at": "2024-09-12 12:30:00",
                "time_effort": 2.5
            }
        },
        {
            "table": "resolutions",
            "scenario": "Resolución técnica detallada con firma digital",
            "sample_data": {
                "observations": "Equipo RATIONAL CombiMaster modelo CM61 presentaba falla eléctrica. Diagnóstico: Tarjeta control principal RC-001 sin señal. Causa: Sobretensión durante tormenta eléctrica. Solución: Reemplazo completo módulo, recalibración algoritmos cocción, pruebas 3 ciclos completos. Cliente capacitado en procedimientos preventivos contra sobretensión",
                "requires_quote": true,
                "equipment_stopped": true,
                "recipient_name": "Carlos Mendoza",
                "recipient_position": "Jefe de Cocina",
                "recipient_signature": "[FIRMA_DIGITAL_BASE64]"
            }
        }
    ],
    "data_quality_notes": {
        "critical_fields_completeness": "Los campos marcados como CRÍTICO deben tener >95% completitud para calidad óptima de IA",
        "temporal_consistency": "Las fechas en activities deben seguir secuencia lógica: planned_start <= started_at <= arrived_at <= work_started_at <= finished_at",
        "referential_integrity": "Todas las foreign keys deben mantenerse íntegras para análisis relacionales",
        "text_quality": "Campos de texto libre (observations, resolution, client_comment) son fuente principal para entrenamiento de IA - calidad del texto impacta directamente resultados"
    },
    "ai_optimization_recommendations": {
        "primary_training_tables": [
            "services",
            "activities",
            "resolutions",
            "activity_subtasks"
        ],
        "key_join_patterns": [
            "services -> activities -> resolutions (Flujo completo de servicio)",
            "activities -> company_branch_equipment -> equipments (Contexto técnico)",
            "services -> company_branches -> companies (Contexto cliente)",
            "activities -> users (Análisis performance técnicos)"
        ],
        "text_preprocessing": "Campos 'observations', 'resolution', 'client_comment' requieren limpieza y normalización técnica",
        "temporal_features": "Calcular duraciones, identificar patrones horarios, análisis estacionalidad en activities",
        "categorical_encoding": "Prioridades, estados, tipos de servicio son factores críticos para modelos predictivos"
    }
}