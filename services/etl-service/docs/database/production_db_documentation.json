{
  "database_metadata": {
    "business_domain": "Servicios técnicos de equipos industriales",
    "industry_context": "Reparación y mantenimiento de equipos de panadería/cocina industrial", 
    "data_classification": "Operacional y técnico - Casos reales de servicio",
    "update_frequency": "Tiempo real durante ejecución de servicios técnicos",
    "business_processes": [
      "Gestión de órdenes de servicio técnico",
      "Seguimiento de equipos industriales",
      "Gestión de inventario de repuestos",
      "Análisis de patrones de falla",
      "Optimización de mantenimiento preventivo"
    ],
    "data_flow": "Cliente reporta problema → Orden de servicio creada → Técnico asignado → Diagnóstico en campo → Reparación ejecutada → Resolución documentada → Cierre de orden → Análisis de tendencias"
  },
  
  "tables": {
    "services": {
      "business_purpose": "Órdenes de trabajo para servicios técnicos en equipos industriales. Contiene el ciclo completo desde problema reportado hasta resolución final.",
      "data_lifecycle": "Creado (pending) → Asignado → En progreso (in_progress) → Completado/Cancelado → Archivado",
      "update_frequency": "Tiempo real durante ejecución del servicio. Updates continuos de estado y progress",
      "critical_fields": {
        "id": "Identificador único de la orden - PK principal",
        "equipment_id": "Referencia al equipo atendido (FK a equipments) - CRÍTICO para contexto y filtros IA",
        "customer_id": "Cliente propietario del equipo - Contexto del entorno operativo",
        "issue_description": "Problema reportado por cliente - CRÍTICO para IA predictiva y entrenamiento",
        "resolution": "Pasos detallados realizados por técnico - CRÍTICO para Knowledge Base y casos de éxito",
        "parts_used": "Lista de repuestos utilizados en la reparación - CRÍTICO para predicción de stock y costos",
        "technician_id": "Técnico asignado y ejecutor - Relevante para contexto de calidad y experiencia",
        "status": "Estado actual del servicio (pending/assigned/in_progress/completed/cancelled)",
        "priority": "Prioridad del servicio (low/medium/high/critical)",
        "service_date": "Fecha de ejecución del servicio - Temporal para análisis de tendencias",
        "total_cost": "Costo total del servicio - Financiero para análisis económico",
        "duration_hours": "Horas de trabajo invertidas - Eficiencia operativa"
      },
      "business_rules": {
        "status_flow": "pending → assigned → in_progress → completed/cancelled",
        "required_completion": "resolution y parts_used obligatorios para completar orden",
        "data_retention": "Histórico completo permanente para análisis de tendencias y entrenamiento IA",
        "priority_escalation": "High priority requiere resolución en 24h, Critical en 4h",
        "technician_assignment": "Solo técnicos certificados para equipos específicos"
      },
      "relationships": {
        "services.equipment_id": "equipments.id (INNER JOIN crítico para contexto)",
        "services.customer_id": "customers.id (LEFT JOIN para información del cliente)",
        "services.technician_id": "technicians.id (INNER JOIN para contexto de expertise)"
      },
      "ai_usage": {
        "prediction_input": ["equipment_id", "issue_description", "equipment_brand", "equipment_model", "customer_environment"],
        "training_data": ["issue_description", "resolution", "parts_used", "diagnosis_process"],
        "metadata_source": ["technician_id", "service_date", "priority", "duration_hours", "total_cost"],
        "kb_value": "CRÍTICO: Casos reales de diagnóstico y resolución para entrenamiento IA. Cada registro es un caso completo de aprendizaje.",
        "transformation_priority": "MÁXIMA - Convertir en narrativa técnica rica con contexto completo"
      },
      "quality_notes": "Calidad alta. Campos de resolución contienen procedimientos detallados. Issue_description a veces requiere normalización de terminología técnica.",
      "examples": [
        {
          "equipment_id": 1234,
          "issue_description": "Horno RATIONAL CombiMaster no enciende, display completamente apagado, sin respuesta a botones",
          "resolution": "Se identificó falla en tarjeta de control principal. Diagnóstico: Voltaje de entrada correcto, pero sin señal en bus de datos. Procedimiento: 1) Desconexión segura de alimentación, 2) Reemplazo de módulo de control RC-001, 3) Recalibración de parámetros, 4) Test completo de funciones. Equipo operativo.",
          "parts_used": "Tarjeta control RATIONAL RC-001, Cable datos RC-002, Fusible protección F-5A"
        },
        {
          "equipment_id": 5678,
          "issue_description": "Laminadora SINMAG SM-520 produce masa irregular, grosor no uniforme",
          "resolution": "Inspección reveló desgaste en rodillos y desalineación mecánica. Procedimiento: 1) Calibración de sistema de presión, 2) Ajuste de paralelismo entre rodillos, 3) Lubricación de mecanismo de ajuste, 4) Test con diferentes masas. Resultado: grosor uniforme restaurado.",
          "parts_used": "Kit lubricación SINMAG LUB-520, Rodamiento ajuste RA-25"
        }
      ],
      "tags": ["high_priority", "ai_training", "technical_content", "core_business", "predictive_value"]
    },
    
    "equipments": {
      "business_purpose": "Catálogo maestro de equipos industriales instalados en clientes. Base fundamental para contexto técnico y filtros de búsqueda.",
      "data_lifecycle": "Instalación → Activo → Mantenimiento → Reemplazo/Baja",
      "update_frequency": "Baja frecuencia. Updates solo en instalaciones, modificaciones o bajas",
      "critical_fields": {
        "id": "Identificador único del equipo - PK principal",
        "brand": "Marca del equipo - CRÍTICO para filtros KB, taxonomía automática y búsquedas precisas",
        "model": "Modelo específico - CRÍTICO para búsquedas exactas y compatibilidad de repuestos",
        "equipment_type": "Categoría funcional (horno, laminadora, batidora, etc.) - CRÍTICO para taxonomía y clasificación IA",
        "serial_number": "Número de serie único - Identificación precisa",
        "installation_date": "Fecha de instalación - Relevante para patrones de desgaste y vida útil",
        "customer_id": "Cliente propietario - Contexto del entorno operativo y uso",
        "location": "Ubicación física del equipo - Contexto de condiciones ambientales",
        "specifications": "Especificaciones técnicas detalladas - Contexto para resolución de problemas",
        "warranty_expiry": "Vencimiento de garantía - Relevante para estrategias de servicio",
        "maintenance_contract": "Tipo de contrato de mantenimiento - Contexto comercial"
      },
      "business_rules": {
        "unique_serial": "Número de serie debe ser único por marca",
        "mandatory_fields": "brand, model, equipment_type son obligatorios",
        "data_integrity": "Validación de marca/modelo contra catálogo oficial"
      },
      "relationships": {
        "equipments.customer_id": "customers.id (LEFT JOIN para información del cliente)",
        "services.equipment_id": "equipments.id (Uno a muchos - un equipo tiene múltiples servicios)"
      },
      "ai_usage": {
        "entity_extraction": ["brand", "model", "equipment_type"],
        "failure_patterns": ["installation_date", "equipment_type", "usage_intensity", "maintenance_history"],
        "context_enrichment": ["customer_location", "specifications", "maintenance_contract"],
        "taxonomy_source": "CRÍTICO: Fuente principal para auto-aprendizaje de marcas, modelos y categorías",
        "metadata_enrichment": "Usado para enriquecer servicios con contexto de equipo"
      },
      "quality_notes": "Calidad muy alta. Datos maestros bien mantenidos. Algunas especificaciones requieren normalización de formato.",
      "examples": [
        {
          "brand": "RATIONAL",
          "model": "CombiMaster Plus 6-1/1",
          "equipment_type": "horno",
          "specifications": "Capacidad: 6 bandejas GN 1/1, Potencia: 7.2kW, Dimensiones: 847x776x1084mm, Vapor integrado"
        },
        {
          "brand": "SINMAG",
          "model": "SM-520B",
          "equipment_type": "laminadora", 
          "specifications": "Ancho rodillo: 520mm, Grosor ajustable: 1-20mm, Motor: 1.5HP, Estructura acero inoxidable"
        }
      ],
      "tags": ["master_data", "taxonomy_source", "equipment_catalog", "ai_context"]
    },
    
    "customers": {
      "business_purpose": "Información de clientes propietarios de equipos. Proporciona contexto del entorno operativo y características del uso.",
      "critical_fields": {
        "id": "Identificador único del cliente",
        "name": "Nombre o razón social del cliente",
        "business_type": "Tipo de negocio (panadería, restaurant, hotel, etc.) - Contexto de uso de equipos",
        "location": "Ubicación geográfica - Relevante para condiciones ambientales",
        "contact_info": "Información de contacto para coordinación de servicios"
      },
      "ai_usage": {
        "context_enrichment": ["business_type", "location", "equipment_usage_patterns"],
        "environmental_factors": "Tipo de negocio indica intensidad y patrón de uso de equipos"
      },
      "tags": ["context_data", "business_intelligence"]
    },
    
    "technicians": {
      "business_purpose": "Información de técnicos que ejecutan servicios. Relevante para contexto de calidad y expertise.",
      "critical_fields": {
        "id": "Identificador único del técnico",
        "name": "Nombre del técnico",
        "expertise_areas": "Áreas de especialización técnica",
        "certification_level": "Nivel de certificación y experiencia",
        "experience_years": "Años de experiencia - Correlación con calidad de resolución"
      },
      "ai_usage": {
        "quality_context": ["expertise_areas", "certification_level", "experience_years"],
        "success_patterns": "Correlación entre técnico y tasa de éxito en resoluciones"
      },
      "tags": ["quality_context", "performance_metrics"]
    },
    
    "activity_services": {
      "business_purpose": "Log detallado de actividades durante la ejecución de servicios. Información granular de pasos ejecutados.",
      "critical_fields": {
        "service_id": "Referencia a la orden de servicio principal",
        "activity_type": "Tipo de actividad (diagnosis, repair, test, etc.)",
        "description": "Descripción detallada de la actividad",
        "timestamp": "Momento de ejecución de la actividad",
        "duration_minutes": "Duración de la actividad específica"
      },
      "ai_usage": {
        "process_analysis": "Análisis de patrones en secuencias de actividades",
        "efficiency_metrics": "Tiempo invertido por tipo de actividad",
        "methodology_learning": "Aprendizaje de mejores prácticas en procedimientos"
      },
      "tags": ["process_data", "efficiency_analysis", "methodology"]
    },
    
    "service_logs": {
      "business_purpose": "Logs automáticos del sistema durante servicios. Información de eventos y cambios de estado.",
      "critical_fields": {
        "service_id": "Referencia a la orden de servicio",
        "log_type": "Tipo de log (status_change, diagnostic, error, etc.)",
        "log_message": "Mensaje del log",
        "timestamp": "Momento del evento",
        "severity": "Severidad del evento (info, warning, error)"
      },
      "ai_usage": {
        "event_analysis": "Análisis de patrones en eventos del sistema",
        "error_prediction": "Detección temprana de problemas recurrentes"
      },
      "tags": ["system_logs", "event_tracking"]
    }
  },
  
  "relationships_overview": {
    "core_entities": ["services", "equipments", "customers", "technicians"],
    "main_flows": {
      "service_lifecycle": "customers → equipments → services → technicians → resolution",
      "knowledge_flow": "services.resolution + equipments.context → Knowledge Base → AI Training → Predictive Models",
      "business_flow": "customer_issue → service_order → diagnosis → repair → documentation → analysis"
    },
    "critical_joins": {
      "services_equipments": "services.equipment_id = equipments.id (CRÍTICO para contexto técnico)",
      "services_customers": "services.customer_id = customers.id (Contexto de entorno)",
      "services_technicians": "services.technician_id = technicians.id (Contexto de calidad)"
    }
  },
  
  "extraction_priorities": {
    "critical_priority": {
      "tables": ["services", "equipments"],
      "reason": "Contienen información técnica directamente relevante para IA predictiva y Knowledge Base",
      "ai_value": "MÁXIMO - Casos reales de falla + contexto técnico completo",
      "extraction_strategy": "INNER JOIN services-equipments para contexto completo"
    },
    "high_priority": {
      "tables": ["activity_services"],
      "reason": "Información granular de procedimientos y metodologías técnicas",
      "ai_value": "ALTO - Patrones de resolución y mejores prácticas"
    },
    "medium_priority": {
      "tables": ["customers", "technicians", "service_logs"],
      "reason": "Proveen contexto complementario importante para análisis completo",
      "ai_value": "MEDIO - Contexto ambiental y de calidad"
    },
    "low_priority": {
      "tables": ["user_sessions", "audit_logs", "system_config"],
      "reason": "Datos operacionales del sistema sin valor técnico directo",
      "ai_value": "BAJO - Solo para auditoria y compliance"
    }
  },
  
  "special_considerations": [
    "Datos de services.resolution contienen conocimiento técnico invaluable - procesar con máxima cuidado",
    "Relación services-equipments es CRÍTICA - siempre hacer JOIN para contexto completo",
    "Campos de issue_description a veces contienen terminología inconsistente - normalizar",
    "Parts_used requiere parsing inteligente para extraer códigos de repuestos",
    "Equipments table es fuente autoritativa para taxonomía de marcas/modelos",
    "Priorizar servicios completados (status='completed') para entrenamiento IA",
    "Considerar patrones temporales - algunos equipos fallan más en ciertas épocas",
    "Validar integridad referencial antes de procesamiento masivo",
    "Respetar privacidad de clientes - anonimizar datos sensibles si es necesario"
  ],
  
  "ai_transformation_guidelines": {
    "narrative_construction": {
      "template": "El equipo {brand} {model} ({equipment_type}) presentó {issue_description}. Diagnóstico: {diagnostic_process}. Resolución: {resolution}. Repuestos utilizados: {parts_used}. Estado final: {outcome}.",
      "required_fields": ["brand", "model", "issue_description", "resolution"],
      "optional_enrichments": ["customer_context", "environmental_factors", "technician_expertise"]
    },
    "metadata_extraction": {
      "automatic_fields": ["brand", "model", "equipment_type", "issue_type", "resolution_type"],
      "derived_fields": ["complexity_level", "cost_category", "urgency_level"],
      "temporal_fields": ["service_date", "duration", "season", "time_since_installation"]
    },
    "quality_indicators": {
      "high_quality": "Resolution > 100 chars AND parts_used specified AND status = completed",
      "medium_quality": "Resolution > 50 chars AND status = completed", 
      "low_quality": "Resolution < 50 chars OR status != completed"
    }
  }
}
