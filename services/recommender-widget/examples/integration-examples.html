<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fixeat Widget - Ejemplos de Integraci√≥n</title>
    <style>
        /* Estilos b√°sicos para la demo */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8f9fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .demo-section {
            background: white;
            margin: 30px 0;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .demo-header {
            margin-bottom: 20px;
        }
        
        .demo-title {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .demo-description {
            color: #6c757d;
            font-size: 16px;
        }
        
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .demo-controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: transparent;
            color: #007bff;
            border: 1px solid #007bff;
        }
        
        .btn-secondary:hover {
            background: #007bff;
            color: white;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #1e7e34;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .btn-warning:hover {
            background: #e0a800;
        }
        
        .demo-status {
            padding: 12px 16px;
            border-radius: 6px;
            margin: 15px 0;
            font-size: 14px;
            font-weight: 500;
        }
        
        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .status-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .business-demo {
            padding: 20px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .business-header {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .business-meta {
            color: #6c757d;
            margin-bottom: 15px;
        }
        
        .business-content {
            margin: 15px 0;
        }
        
        .business-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .menu-item {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #007bff;
        }
        
        .menu-item h4 {
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .menu-item p {
            color: #6c757d;
            font-size: 14px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .demo-section {
                padding: 20px;
            }
            
            .demo-controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="demo-section">
            <div class="demo-header">
                <h1 class="demo-title">üéØ Fixeat Widget - Ejemplos de Integraci√≥n</h1>
                <p class="demo-description">
                    Ejemplos pr√°cticos de c√≥mo integrar el widget inteligente de recomendaciones de equipamiento en diferentes tipos de sitios web. 
                    El widget detecta autom√°ticamente el tipo de negocio y adapta sus preguntas y recomendaciones.
                </p>
            </div>
            
            <div id="main-status" class="demo-status status-info">
                <strong>Estado:</strong> Listo para testing. Selecciona un ejemplo para probar el widget.
            </div>
            
            <div class="demo-controls">
                <button class="btn btn-primary" onclick="showWidgetInfo()">
                    üìã Informaci√≥n del Widget
                </button>
                <button class="btn btn-secondary" onclick="toggleDebugMode()">
                    üêõ Modo Debug
                </button>
                <button class="btn btn-warning" onclick="resetAllWidgets()">
                    üîÑ Reset Widgets
                </button>
            </div>
        </div>

        <!-- Ejemplo 1: Panader√≠a Artesanal -->
        <div class="demo-section">
            <div class="demo-header">
                <h2 class="demo-title">ü•ñ Panader√≠a Artesanal San Miguel</h2>
                <p class="demo-description">
                    Ejemplo de integraci√≥n en una panader√≠a artesanal. El widget deber√≠a detectar autom√°ticamente que es una panader√≠a 
                    bas√°ndose en las palabras clave como "pan", "masa madre", "horno", etc.
                </p>
            </div>
            
            <div class="business-demo" id="bakery-demo">
                <div class="business-header">Panader√≠a Artesanal San Miguel</div>
                <div class="business-meta">üçû Especialistas en pan artesanal y masa madre desde 1985</div>
                
                <div class="business-content">
                    <p>Somos una panader√≠a tradicional especializada en la elaboraci√≥n de pan artesanal con masa madre natural. 
                    Nuestro horno de le√±a funciona desde hace m√°s de 30 a√±os, creando los mejores panes de la regi√≥n.</p>
                    
                    <div class="business-menu">
                        <div class="menu-item">
                            <h4>Pan de Masa Madre</h4>
                            <p>Fermentaci√≥n natural de 24 horas para un sabor √∫nico</p>
                        </div>
                        <div class="menu-item">
                            <h4>Baguette Francesa</h4>
                            <p>Crujiente por fuera, esponjosa por dentro</p>
                        </div>
                        <div class="menu-item">
                            <h4>Pan Integral</h4>
                            <p>Con granos y semillas, rico en fibra</p>
                        </div>
                        <div class="menu-item">
                            <h4>Croissants</h4>
                            <p>Hojaldre artesanal con mantequilla francesa</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="demo-controls">
                <button class="btn btn-primary" onclick="initBakeryWidget()">
                    üöÄ Activar Widget Panader√≠a
                </button>
                <button class="btn btn-secondary" onclick="showDetectionResults('bakery')">
                    üîç Ver Detecci√≥n
                </button>
            </div>
            
            <div class="code-block">
&lt;!-- Integraci√≥n para Panader√≠a --&gt;
&lt;script&gt;
  window.FixeatConfig = {
    apiKey: 'pk_demo_bakery_12345',
    theme: {
      primaryColor: '#8B4513', // Color chocolate
      fontFamily: 'Georgia, serif'
    },
    position: 'bottom-right',
    autoDetect: true,
    language: 'es',
    customPrompts: {
      welcome: '¬°Hola! Veo que tienes una panader√≠a. ¬øTe ayudo a encontrar equipos para optimizar tu producci√≥n?'
    }
  };
&lt;/script&gt;
&lt;script src="./src/fixeat-widget.js" async&gt;&lt;/script&gt;
            </div>
        </div>

        <!-- Ejemplo 2: Pizzer√≠a Napolitana -->
        <div class="demo-section">
            <div class="demo-header">
                <h2 class="demo-title">üçï Pizzer√≠a Napolitana Roma</h2>
                <p class="demo-description">
                    Pizzer√≠a aut√©ntica con horno de le√±a. El widget detectar√° palabras como "pizza", "italiana", "mozzarella", 
                    "horno de le√±a" para identificar el tipo de negocio.
                </p>
            </div>
            
            <div class="business-demo" id="pizzeria-demo">
                <div class="business-header">Pizzer√≠a Napolitana Roma</div>
                <div class="business-meta">üáÆüáπ Aut√©ntica pizza italiana con horno de le√±a tradicional</div>
                
                <div class="business-content">
                    <p>Pizzer√≠a aut√©ntica napolitana con horno de le√±a importado de Italia. Utilizamos ingredientes tradicionales: 
                    mozzarella di bufala, tomate San Marzano y albahaca fresca. Especialistas en pizza con masa fermentada 72 horas.</p>
                    
                    <div class="business-menu">
                        <div class="menu-item">
                            <h4>Pizza Margherita</h4>
                            <p>Mozzarella di bufala, tomate San Marzano, albahaca</p>
                        </div>
                        <div class="menu-item">
                            <h4>Pizza Quattro Stagioni</h4>
                            <p>Cuatro estaciones en una pizza tradicional</p>
                        </div>
                        <div class="menu-item">
                            <h4>Pizza Marinara</h4>
                            <p>Tomate, ajo, or√©gano y aceite de oliva extra virgen</p>
                        </div>
                        <div class="menu-item">
                            <h4>Calzone Ripieno</h4>
                            <p>Pizza cerrada rellena de ricotta y mozzarella</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="demo-controls">
                <button class="btn btn-primary" onclick="initPizzeriaWidget()">
                    üöÄ Activar Widget Pizzer√≠a
                </button>
                <button class="btn btn-secondary" onclick="showDetectionResults('pizzeria')">
                    üîç Ver Detecci√≥n
                </button>
            </div>
            
            <div class="code-block">
&lt;!-- Integraci√≥n para Pizzer√≠a --&gt;
&lt;script&gt;
  window.FixeatConfig = {
    apiKey: 'pk_demo_pizzeria_67890',
    theme: {
      primaryColor: '#C8102E', // Rojo italiano
      fontFamily: 'Arial, sans-serif'
    },
    position: 'bottom-left',
    autoDetect: true,
    language: 'es',
    detectionConfig: {
      contentWeight: 0.5, // M√°s peso al contenido
      structureWeight: 0.3,
      imageWeight: 0.1,
      urlWeight: 0.1
    }
  };
&lt;/script&gt;
&lt;script src="./src/fixeat-widget.js" async&gt;&lt;/script&gt;
            </div>
        </div>

        <!-- Ejemplo 3: Cafeter√≠a Moderna -->
        <div class="demo-section">
            <div class="demo-header">
                <h2 class="demo-title">‚òï Cafeter√≠a Central Coffee</h2>
                <p class="demo-description">
                    Cafeter√≠a especializada en caf√© de especialidad. El widget detectar√° t√©rminos como "caf√©", "espresso", 
                    "cappuccino", "barista" para identificar el negocio.
                </p>
            </div>
            
            <div class="business-demo" id="cafe-demo">
                <div class="business-header">Central Coffee</div>
                <div class="business-meta">‚òï Caf√© de especialidad y m√©todos de extracci√≥n artesanales</div>
                
                <div class="business-content">
                    <p>Cafeter√≠a especializada en caf√© de origen √∫nico y m√©todos de extracci√≥n alternativos. 
                    Nuestros baristas certificados preparan el mejor espresso, cappuccino y latte art de la ciudad. 
                    Tambi√©n ofrecemos desayunos gourmet y reposter√≠a artesanal.</p>
                    
                    <div class="business-menu">
                        <div class="menu-item">
                            <h4>Espresso de Origen</h4>
                            <p>Caf√© colombiano, brasile√±o y et√≠ope</p>
                        </div>
                        <div class="menu-item">
                            <h4>Cappuccino Artesanal</h4>
                            <p>Con latte art personalizado</p>
                        </div>
                        <div class="menu-item">
                            <h4>Cold Brew</h4>
                            <p>Extracci√≥n en fr√≠o de 12 horas</p>
                        </div>
                        <div class="menu-item">
                            <h4>Desayunos Gourmet</h4>
                            <p>Acompa√±ados de nuestro caf√© especial</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="demo-controls">
                <button class="btn btn-primary" onclick="initCafeWidget()">
                    üöÄ Activar Widget Cafeter√≠a
                </button>
                <button class="btn btn-secondary" onclick="showDetectionResults('cafe')">
                    üîç Ver Detecci√≥n
                </button>
            </div>
            
            <div class="code-block">
&lt;!-- Integraci√≥n para Cafeter√≠a --&gt;
&lt;script&gt;
  window.FixeatConfig = {
    apiKey: 'pk_demo_cafe_54321',
    theme: {
      primaryColor: '#6F4E37', // Color caf√©
      fontFamily: 'Roboto, sans-serif'
    },
    position: 'bottom-right',
    autoDetect: true,
    language: 'es',
    welcomeDelay: 2000,
    customPrompts: {
      welcome: '¬°Hola! Detect√© que tienes una cafeter√≠a. ¬øTe ayudo a encontrar equipos para mejorar tu servicio de caf√©?'
    }
  };
&lt;/script&gt;
&lt;script src="./src/fixeat-widget.js" async&gt;&lt;/script&gt;
            </div>
        </div>

        <!-- Ejemplo 4: Negocio Gen√©rico -->
        <div class="demo-section">
            <div class="demo-header">
                <h2 class="demo-title">üè¢ Sitio Web Gen√©rico</h2>
                <p class="demo-description">
                    Ejemplo sin palabras clave espec√≠ficas. El widget no podr√° detectar autom√°ticamente el tipo de negocio 
                    y mostrar√° opciones para que el usuario seleccione.
                </p>
            </div>
            
            <div class="business-demo" id="generic-demo">
                <div class="business-header">Empresa de Servicios ABC</div>
                <div class="business-meta">üè¢ Soluciones empresariales y consultor√≠a</div>
                
                <div class="business-content">
                    <p>Somos una empresa de servicios que ofrece soluciones integrales para el sector empresarial. 
                    Nuestro equipo de consultores especializados ayuda a las organizaciones a optimizar sus procesos 
                    y alcanzar sus objetivos de negocio.</p>
                    
                    <div class="business-menu">
                        <div class="menu-item">
                            <h4>Consultor√≠a Estrat√©gica</h4>
                            <p>Planificaci√≥n y desarrollo empresarial</p>
                        </div>
                        <div class="menu-item">
                            <h4>Optimizaci√≥n de Procesos</h4>
                            <p>Mejora de eficiencia operativa</p>
                        </div>
                        <div class="menu-item">
                            <h4>Tecnolog√≠a</h4>
                            <p>Implementaci√≥n de soluciones digitales</p>
                        </div>
                        <div class="menu-item">
                            <h4>Capacitaci√≥n</h4>
                            <p>Formaci√≥n de equipos de trabajo</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="demo-controls">
                <button class="btn btn-primary" onclick="initGenericWidget()">
                    üöÄ Activar Widget Gen√©rico
                </button>
                <button class="btn btn-secondary" onclick="showDetectionResults('generic')">
                    üîç Ver Detecci√≥n
                </button>
            </div>
            
            <div class="code-block">
&lt;!-- Integraci√≥n Gen√©rica (sin detecci√≥n autom√°tica) --&gt;
&lt;script&gt;
  window.FixeatConfig = {
    apiKey: 'pk_demo_generic_99999',
    theme: {
      primaryColor: '#6c757d', // Gris neutro
      fontFamily: 'system-ui, sans-serif'
    },
    position: 'bottom-right',
    autoDetect: false, // Desactivar detecci√≥n autom√°tica
    language: 'es',
    customPrompts: {
      welcome: '¬°Hola! Soy tu asistente de equipamiento. ¬øEn qu√© tipo de negocio trabajas?'
    }
  };
&lt;/script&gt;
&lt;script src="./src/fixeat-widget.js" async&gt;&lt;/script&gt;
            </div>
        </div>

        <!-- Panel de Control -->
        <div class="demo-section">
            <div class="demo-header">
                <h2 class="demo-title">üéõÔ∏è Panel de Control</h2>
                <p class="demo-description">
                    Controles para probar diferentes configuraciones y funcionalidades del widget.
                </p>
            </div>
            
            <div class="demo-controls">
                <button class="btn btn-primary" onclick="testAllDetections()">
                    üß™ Probar Todas las Detecciones
                </button>
                <button class="btn btn-secondary" onclick="simulateConversation()">
                    üí¨ Simular Conversaci√≥n
                </button>
                <button class="btn btn-success" onclick="showAnalytics()">
                    üìä Ver Analytics
                </button>
                <button class="btn btn-warning" onclick="exportConfig()">
                    üì• Exportar Configuraci√≥n
                </button>
            </div>
            
            <div id="control-results" class="demo-status" style="display: none;">
                <!-- Resultados del panel de control se mostrar√°n aqu√≠ -->
            </div>
        </div>
    </div>

    <!-- Widget Script (Simulado para demo) -->
    <script>
        // Variables globales para el demo
        let currentWidget = null;
        let debugMode = false;
        let detectionResults = {};

        // Simular clase FixeatWidget para el demo
        class FixeatWidgetDemo {
            constructor(config) {
                this.config = config;
                this.isOpen = false;
                this.detectedBusiness = null;
            }

            async init() {
                console.log('Inicializando widget con configuraci√≥n:', this.config);
                
                // Simular detecci√≥n de negocio
                if (this.config.autoDetect) {
                    this.detectedBusiness = await this.simulateBusinessDetection();
                }
                
                this.createWidget();
                this.showWelcomeMessage();
                
                return this;
            }

            async simulateBusinessDetection() {
                // Simular an√°lisis del contenido de la p√°gina
                const pageText = document.body.textContent.toLowerCase();
                
                const businessScores = {
                    bakery: this.calculateScore(pageText, ['pan', 'panader√≠a', 'horno', 'masa', 'levadura', 'artesanal']),
                    pizzeria: this.calculateScore(pageText, ['pizza', 'pizzer√≠a', 'italiana', 'mozzarella', 'horno de le√±a']),
                    cafe: this.calculateScore(pageText, ['caf√©', 'espresso', 'cappuccino', 'barista', 'cafeter√≠a']),
                    restaurant: this.calculateScore(pageText, ['restaurante', 'men√∫', 'cocina', 'chef', 'comida'])
                };

                const topBusiness = Object.entries(businessScores)
                    .sort(([,a], [,b]) => b - a)[0];

                const result = {
                    type: topBusiness[1] > 30 ? topBusiness[0] : 'unknown',
                    confidence: Math.round(topBusiness[1]),
                    detectionTime: Math.random() * 500 + 100,
                    indicators: [
                        {
                            source: 'content',
                            evidence: `Keywords found in page content`,
                            confidence: Math.round(topBusiness[1])
                        }
                    ]
                };

                console.log('Detecci√≥n simulada:', result);
                return result;
            }

            calculateScore(text, keywords) {
                let score = 0;
                keywords.forEach(keyword => {
                    const matches = (text.match(new RegExp(keyword, 'gi')) || []).length;
                    score += matches * 20;
                });
                return Math.min(score, 100);
            }

            createWidget() {
                // Crear bot√≥n flotante del widget
                const existingWidget = document.getElementById('demo-widget');
                if (existingWidget) {
                    existingWidget.remove();
                }

                const widget = document.createElement('div');
                widget.id = 'demo-widget';
                widget.style.cssText = `
                    position: fixed;
                    ${this.config.position === 'bottom-left' ? 'left: 20px;' : 'right: 20px;'}
                    bottom: 20px;
                    width: 60px;
                    height: 60px;
                    background: ${this.config.theme?.primaryColor || '#007bff'};
                    border-radius: 50%;
                    cursor: pointer;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10000;
                    transition: all 0.3s ease;
                    color: white;
                    font-size: 24px;
                `;
                
                widget.innerHTML = 'üí¨';
                widget.onclick = () => this.toggle();
                
                // Hover effect
                widget.onmouseenter = () => {
                    widget.style.transform = 'scale(1.05)';
                };
                widget.onmouseleave = () => {
                    widget.style.transform = 'scale(1)';
                };

                document.body.appendChild(widget);
            }

            showWelcomeMessage() {
                setTimeout(() => {
                    let message = this.config.customPrompts?.welcome;
                    
                    if (!message) {
                        if (this.detectedBusiness && this.detectedBusiness.confidence > 60) {
                            const businessName = this.getBusinessTypeName(this.detectedBusiness.type);
                            message = `¬°Hola! Detect√© que tienes ${businessName}. ¬øTe ayudo a encontrar el equipo perfecto?`;
                        } else {
                            message = '¬°Hola! Soy tu asistente de equipamiento. ¬øEn qu√© tipo de negocio trabajas?';
                        }
                    }
                    
                    this.showNotification(message);
                }, this.config.welcomeDelay || 3000);
            }

            showNotification(message) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    ${this.config.position === 'bottom-left' ? 'left: 90px;' : 'right: 90px;'}
                    bottom: 30px;
                    background: white;
                    padding: 15px 20px;
                    border-radius: 12px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    max-width: 300px;
                    z-index: 10001;
                    border: 1px solid #e0e0e0;
                    animation: slideIn 0.3s ease;
                `;
                
                notification.innerHTML = `
                    <div style="font-size: 14px; color: #333; margin-bottom: 10px;">${message}</div>
                    <button onclick="this.parentElement.remove()" style="
                        background: ${this.config.theme?.primaryColor || '#007bff'};
                        color: white;
                        border: none;
                        padding: 8px 16px;
                        border-radius: 6px;
                        cursor: pointer;
                        font-size: 12px;
                    ">¬°S√≠, ay√∫dame!</button>
                    <button onclick="this.parentElement.remove()" style="
                        background: transparent;
                        color: #666;
                        border: 1px solid #ddd;
                        padding: 8px 16px;
                        border-radius: 6px;
                        cursor: pointer;
                        font-size: 12px;
                        margin-left: 8px;
                    ">No ahora</button>
                `;

                document.body.appendChild(notification);

                // Auto-remove despu√©s de 10 segundos
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 10000);
            }

            toggle() {
                alert(`Widget activado!\n\nTipo detectado: ${this.detectedBusiness?.type || 'desconocido'}\nConfianza: ${this.detectedBusiness?.confidence || 0}%\n\nEn una implementaci√≥n real, aqu√≠ se abrir√≠a el chat completo.`);
            }

            getBusinessTypeName(type) {
                const names = {
                    bakery: 'una panader√≠a',
                    restaurant: 'un restaurante',
                    cafe: 'una cafeter√≠a',
                    pizzeria: 'una pizzer√≠a'
                };
                return names[type] || 'un negocio gastron√≥mico';
            }

            destroy() {
                const widget = document.getElementById('demo-widget');
                if (widget) {
                    widget.remove();
                }
                currentWidget = null;
            }
        }

        // Funci√≥n para agregar estilos de animaci√≥n
        function addAnimationStyles() {
            if (!document.getElementById('demo-animations')) {
                const style = document.createElement('style');
                style.id = 'demo-animations';
                style.textContent = `
                    @keyframes slideIn {
                        from {
                            opacity: 0;
                            transform: translateY(10px);
                        }
                        to {
                            opacity: 1;
                            transform: translateY(0);
                        }
                    }
                `;
                document.head.appendChild(style);
            }
        }

        // Funciones de demostraci√≥n
        async function initBakeryWidget() {
            if (currentWidget) {
                currentWidget.destroy();
            }
            
            addAnimationStyles();
            
            const config = {
                apiKey: 'pk_demo_bakery_12345',
                theme: {
                    primaryColor: '#8B4513',
                    fontFamily: 'Georgia, serif'
                },
                position: 'bottom-right',
                autoDetect: true,
                language: 'es',
                customPrompts: {
                    welcome: '¬°Hola! Veo que tienes una panader√≠a. ¬øTe ayudo a encontrar equipos para optimizar tu producci√≥n?'
                }
            };

            currentWidget = new FixeatWidgetDemo(config);
            await currentWidget.init();
            
            updateStatus('Widget de panader√≠a activado correctamente', 'success');
        }

        async function initPizzeriaWidget() {
            if (currentWidget) {
                currentWidget.destroy();
            }
            
            addAnimationStyles();
            
            const config = {
                apiKey: 'pk_demo_pizzeria_67890',
                theme: {
                    primaryColor: '#C8102E',
                    fontFamily: 'Arial, sans-serif'
                },
                position: 'bottom-left',
                autoDetect: true,
                language: 'es'
            };

            currentWidget = new FixeatWidgetDemo(config);
            await currentWidget.init();
            
            updateStatus('Widget de pizzer√≠a activado correctamente', 'success');
        }

        async function initCafeWidget() {
            if (currentWidget) {
                currentWidget.destroy();
            }
            
            addAnimationStyles();
            
            const config = {
                apiKey: 'pk_demo_cafe_54321',
                theme: {
                    primaryColor: '#6F4E37',
                    fontFamily: 'Roboto, sans-serif'
                },
                position: 'bottom-right',
                autoDetect: true,
                language: 'es',
                welcomeDelay: 2000
            };

            currentWidget = new FixeatWidgetDemo(config);
            await currentWidget.init();
            
            updateStatus('Widget de cafeter√≠a activado correctamente', 'success');
        }

        async function initGenericWidget() {
            if (currentWidget) {
                currentWidget.destroy();
            }
            
            addAnimationStyles();
            
            const config = {
                apiKey: 'pk_demo_generic_99999',
                theme: {
                    primaryColor: '#6c757d',
                    fontFamily: 'system-ui, sans-serif'
                },
                position: 'bottom-right',
                autoDetect: false,
                language: 'es'
            };

            currentWidget = new FixeatWidgetDemo(config);
            await currentWidget.init();
            
            updateStatus('Widget gen√©rico activado (sin detecci√≥n autom√°tica)', 'warning');
        }

        function showDetectionResults(businessType) {
            if (!currentWidget || !currentWidget.detectedBusiness) {
                alert('Primero activa un widget para ver los resultados de detecci√≥n.');
                return;
            }

            const result = currentWidget.detectedBusiness;
            const resultText = `
Resultados de Detecci√≥n Autom√°tica:

Tipo detectado: ${result.type}
Confianza: ${result.confidence}%
Tiempo de detecci√≥n: ${Math.round(result.detectionTime)}ms

Indicadores encontrados:
${result.indicators.map(ind => `‚Ä¢ ${ind.source}: ${ind.evidence} (${ind.confidence}%)`).join('\n')}

${result.confidence > 70 ? '‚úÖ Detecci√≥n exitosa' : '‚ö†Ô∏è Baja confianza, se mostrar√° selector manual'}
            `;

            alert(resultText);
        }

        function updateStatus(message, type = 'info') {
            const statusEl = document.getElementById('main-status');
            statusEl.className = `demo-status status-${type}`;
            statusEl.innerHTML = `<strong>Estado:</strong> ${message}`;
        }

        function showWidgetInfo() {
            const info = `
Informaci√≥n del Widget Fixeat:

üìã Caracter√≠sticas principales:
‚Ä¢ Detecci√≥n autom√°tica de tipo de negocio
‚Ä¢ Conversaci√≥n inteligente con IA
‚Ä¢ Recomendaciones personalizadas
‚Ä¢ Integraci√≥n ultra-simple (1 l√≠nea de c√≥digo)
‚Ä¢ Dise√±o responsive y accesible
‚Ä¢ Personalizable con temas

üîß Configuraci√≥n:
‚Ä¢ API Key requerida para producci√≥n
‚Ä¢ M√∫ltiples posiciones disponibles
‚Ä¢ Temas personalizables
‚Ä¢ Soporte multiidioma
‚Ä¢ Modo debug para desarrollo

üí° Tipos de negocio soportados:
‚Ä¢ Panader√≠as y pasteler√≠as
‚Ä¢ Restaurantes y cocinas
‚Ä¢ Cafeter√≠as y bares
‚Ä¢ Pizzer√≠as
‚Ä¢ Food trucks
‚Ä¢ Hoteles y catering
            `;
            
            alert(info);
        }

        function toggleDebugMode() {
            debugMode = !debugMode;
            const btn = event.target;
            
            if (debugMode) {
                btn.textContent = 'üêõ Debug: ON';
                btn.classList.remove('btn-secondary');
                btn.classList.add('btn-success');
                updateStatus('Modo debug activado - se mostrar√°n logs detallados', 'info');
            } else {
                btn.textContent = 'üêõ Modo Debug';
                btn.classList.remove('btn-success');
                btn.classList.add('btn-secondary');
                updateStatus('Modo debug desactivado', 'info');
            }
        }

        function resetAllWidgets() {
            if (currentWidget) {
                currentWidget.destroy();
            }
            
            // Remover notificaciones
            document.querySelectorAll('[style*="position: fixed"][style*="z-index: 10001"]').forEach(el => {
                el.remove();
            });
            
            updateStatus('Todos los widgets han sido reseteados', 'info');
        }

        function testAllDetections() {
            updateStatus('Probando detecci√≥n en todas las secciones...', 'info');
            
            setTimeout(() => {
                const results = [
                    { section: 'Panader√≠a', type: 'bakery', confidence: 89 },
                    { section: 'Pizzer√≠a', type: 'pizzeria', confidence: 92 },
                    { section: 'Cafeter√≠a', type: 'cafe', confidence: 85 },
                    { section: 'Gen√©rico', type: 'unknown', confidence: 15 }
                ];
                
                let resultText = 'Resultados de detecci√≥n:\n\n';
                results.forEach(r => {
                    resultText += `${r.section}: ${r.type} (${r.confidence}%)\n`;
                });
                
                alert(resultText);
                updateStatus('Prueba de detecci√≥n completada', 'success');
            }, 2000);
        }

        function simulateConversation() {
            const conversations = [
                'Usuario: Necesito equipos para mi panader√≠a',
                'IA: ¬øCu√°ntos kg de pan produces diariamente?',
                'Usuario: Aproximadamente 50 kg',
                'IA: Perfecto. ¬øQu√© tipos de pan produces?',
                'Usuario: Pan artesanal y baguettes',
                'IA: Te recomiendo una amasadora espiral...'
            ];
            
            alert('Conversaci√≥n simulada:\n\n' + conversations.join('\n\n'));
        }

        function showAnalytics() {
            const analytics = `
üìä Analytics del Widget (Demo):

Sesiones totales: 1,247
Detecciones exitosas: 89%
Conversiones: 23%
Tiempo promedio: 4.2 min

Por tipo de negocio:
‚Ä¢ Panader√≠as: 35% (mayor conversi√≥n)
‚Ä¢ Restaurantes: 28%
‚Ä¢ Cafeter√≠as: 22%
‚Ä¢ Pizzer√≠as: 15%

Dispositivos:
‚Ä¢ Desktop: 62%
‚Ä¢ Mobile: 35%
‚Ä¢ Tablet: 3%
            `;
            
            alert(analytics);
        }

        function exportConfig() {
            if (!currentWidget) {
                alert('No hay widget activo para exportar configuraci√≥n.');
                return;
            }
            
            const config = JSON.stringify(currentWidget.config, null, 2);
            const blob = new Blob([config], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'fixeat-widget-config.json';
            a.click();
            
            URL.revokeObjectURL(url);
            updateStatus('Configuraci√≥n exportada correctamente', 'success');
        }

        // Inicializar demo
        document.addEventListener('DOMContentLoaded', function() {
            updateStatus('Demo cargado. Selecciona un ejemplo para probar el widget.', 'info');
        });
    </script>
</body>
</html>


